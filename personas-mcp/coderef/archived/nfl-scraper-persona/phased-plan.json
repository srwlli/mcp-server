{
  "workorder_id": "WO-NFL-SCRAPER-PERSONA-001",
  "feature_name": "nfl-scraper-expert (Phased Implementation)",
  "project": "personas-mcp",
  "target_project": "next-scraper",
  "created_at": "2025-10-18",
  "plan_type": "PHASED",

  "overview": {
    "description": "Phased implementation plan for nfl-scraper-expert persona to manage complexity and ensure quality at each stage",
    "total_phases": 3,
    "estimated_total_time": "4-6 hours",
    "rationale": "Breaking into phases allows for iterative development, testing at each stage, and avoiding overwhelming system prompt length"
  },

  "phase_1": {
    "phase_name": "Core Persona Foundation",
    "workorder_id": "WO-NFL-SCRAPER-PERSONA-001-P1",
    "estimated_time": "1.5-2 hours",
    "status": "READY",

    "objectives": [
      "Create basic persona structure with essential expertise",
      "Focus on ESPN API and next-scraper architecture knowledge",
      "System prompt: 800-1200 lines (manageable, focused)",
      "Get persona loaded and validated"
    ],

    "deliverables": [
      {
        "file": "personas/base/nfl-scraper-expert.json",
        "content": "Core persona with 10 expertise areas, 8 use cases, 800-1200 line system prompt"
      },
      {
        "file": ".claude/commands/nfl-scraper-expert.md",
        "content": "Basic slash command for activation"
      }
    ],

    "scope": {
      "expertise_areas": [
        "ESPN API integration (endpoints, response formats, rate limits)",
        "next-scraper architecture (file structure, scripts, utils)",
        "NFL data model (core tables: teams, players, games, stats)",
        "Web scraping best practices (rate limiting, error handling)",
        "Supabase operations (inserts, upserts, queries)",
        "Winston logging patterns",
        "node-cron scheduling basics",
        "Data normalization (team abbreviations, player names)",
        "Error recovery strategies",
        "Basic troubleshooting workflows"
      ],
      "use_cases": [
        "Understanding next-scraper architecture",
        "Debugging ESPN API connection issues",
        "Implementing basic rate limiting",
        "Adding Winston logging to new scripts",
        "Troubleshooting Supabase connection errors",
        "Understanding the NFL data model",
        "Creating a simple new scraper",
        "Basic cron schedule setup"
      ],
      "system_prompt_sections": [
        "Your Identity (NFL scraper expert)",
        "Core Mission (maintain next-scraper platform)",
        "next-scraper Architecture (file structure overview)",
        "ESPN API Basics (key endpoints, authentication, rate limits)",
        "NFL Data Model (core tables and relationships)",
        "Utilities Knowledge (supabase-client, espn-api, logger, rate-limiter)",
        "Basic Scraper Patterns (request → validate → insert pattern)",
        "Error Handling 101 (try-catch, logging, recovery)",
        "Troubleshooting Guide (common issues and solutions)"
      ],
      "code_examples": [
        "ESPN API request with rate limiting",
        "Supabase upsert for idempotency",
        "Winston logging with context",
        "Basic error handling pattern"
      ]
    },

    "tasks": [
      {
        "task_id": "P1-1",
        "description": "Create core persona JSON (800-1200 lines)",
        "subtasks": [
          "Write persona metadata (name, version, description)",
          "Add 10 core expertise areas",
          "Add 8 basic use cases",
          "Write 800-1200 line system prompt with 9 sections",
          "Include 4 code examples",
          "Add behavior patterns",
          "Add timestamps"
        ]
      },
      {
        "task_id": "P1-2",
        "description": "Create slash command",
        "subtasks": [
          "Create .claude/commands/nfl-scraper-expert.md",
          "Document activation command",
          "List core capabilities"
        ]
      },
      {
        "task_id": "P1-3",
        "description": "Test Phase 1 persona",
        "subtasks": [
          "Load persona via PersonaManager",
          "Verify schema compliance",
          "Test activation via slash command",
          "Ask basic next-scraper questions to validate responses"
        ]
      },
      {
        "task_id": "P1-4",
        "description": "Commit Phase 1",
        "subtasks": [
          "Git add all Phase 1 files",
          "Commit with 'Phase 1: Core persona foundation'",
          "Push to GitHub"
        ]
      }
    ],

    "success_criteria": [
      "Persona loads without errors",
      "System prompt 800-1200 lines",
      "10 expertise areas defined",
      "8 use cases documented",
      "Schema validation passes",
      "AI provides relevant ESPN API guidance",
      "AI references next-scraper file structure"
    ],

    "exit_criteria": "Phase 1 complete when persona is loaded, validated, and providing accurate basic guidance on next-scraper architecture and ESPN API"
  },

  "phase_2": {
    "phase_name": "Advanced Scraper Knowledge",
    "workorder_id": "WO-NFL-SCRAPER-PERSONA-001-P2",
    "estimated_time": "1.5-2 hours",
    "status": "PENDING",
    "depends_on": "Phase 1 complete",

    "objectives": [
      "Expand system prompt with deep scraper knowledge",
      "Add detailed patterns for all 5 scrapers",
      "Include advanced troubleshooting",
      "System prompt: Add 600-800 lines (total: 1400-2000)"
    ],

    "deliverables": [
      {
        "file": "personas/base/nfl-scraper-expert.json",
        "content": "Updated persona with 15 expertise areas, 10 use cases, 1400-2000 line system prompt"
      }
    ],

    "scope": {
      "additional_expertise_areas": [
        "game-stats-scraper patterns (team + player + scoring plays)",
        "live-games-scraper real-time polling",
        "injuries-scraper and data availability issues",
        "roster-updates-scraper transaction tracking",
        "standings-scraper calculation logic"
      ],
      "additional_use_cases": [
        "Optimizing game-stats-scraper for concurrent games",
        "Debugging live-games-scraper polling"
      ],
      "additional_system_prompt_sections": [
        "Scraper Deep Dive (all 5 scrapers with patterns)",
        "Seed Scripts Knowledge (teams, stadiums, players, schedule)",
        "Scheduler Orchestration (cron jobs, game-day detection)",
        "Advanced Error Handling (partial failures, transactions)",
        "Performance Optimization (batch operations, connection pooling)"
      ],
      "additional_code_examples": [
        "game-stats-scraper full workflow",
        "live-games-scraper polling loop",
        "Batch insert pattern for player stats",
        "Transaction rollback on failure"
      ]
    },

    "tasks": [
      {
        "task_id": "P2-1",
        "description": "Expand persona with advanced scraper knowledge",
        "subtasks": [
          "Add 5 more expertise areas (total: 15)",
          "Add 2 more use cases (total: 10)",
          "Expand system prompt by 600-800 lines",
          "Add 4 more code examples (total: 8)",
          "Update version metadata"
        ]
      },
      {
        "task_id": "P2-2",
        "description": "Test Phase 2 enhancements",
        "subtasks": [
          "Reload persona via PersonaManager",
          "Verify expanded system prompt loads correctly",
          "Ask advanced scraper questions",
          "Verify AI knows all 5 scraper patterns"
        ]
      },
      {
        "task_id": "P2-3",
        "description": "Commit Phase 2",
        "subtasks": [
          "Git add updated persona file",
          "Commit with 'Phase 2: Advanced scraper knowledge'",
          "Push to GitHub"
        ]
      }
    ],

    "success_criteria": [
      "System prompt 1400-2000 lines",
      "15 expertise areas",
      "10 use cases",
      "AI provides specific guidance on all 5 scrapers",
      "AI references actual scraper file names and patterns",
      "Performance remains good (no loading issues)"
    ],

    "exit_criteria": "Phase 2 complete when persona has comprehensive scraper knowledge and can guide implementation/debugging of all scraper types"
  },

  "phase_3": {
    "phase_name": "Documentation & Polish",
    "workorder_id": "WO-NFL-SCRAPER-PERSONA-001-P3",
    "estimated_time": "1-1.5 hours",
    "status": "PENDING",
    "depends_on": "Phase 2 complete",

    "objectives": [
      "Add final expertise areas and use cases",
      "Add comprehensive troubleshooting workflows",
      "Update all project documentation",
      "Final testing and validation",
      "System prompt: Add 200-400 lines (total: 1600-2400)"
    ],

    "deliverables": [
      {
        "file": "personas/base/nfl-scraper-expert.json",
        "content": "Final persona with 18 expertise areas, 12 use cases, 1600-2400 line system prompt"
      },
      {
        "file": "PERSONAS-CREATED.md",
        "content": "Updated with nfl-scraper-expert as 4th persona"
      },
      {
        "file": "my-guide.md",
        "content": "Added nfl-scraper-expert to personas list"
      },
      {
        "file": "CLAUDE.md",
        "content": "Updated persona count 3 → 4"
      },
      {
        "file": "README.md",
        "content": "Updated features and stats"
      },
      {
        "file": "index.html",
        "content": "Added persona card for nfl-scraper-expert"
      }
    ],

    "scope": {
      "final_expertise_areas": [
        "Docker deployment and production setup",
        "Testing strategies for scrapers",
        "ESPN API schema change handling"
      ],
      "final_use_cases": [
        "Implementing alerting for scraper failures",
        "Migrating to alternative data source",
        "Creating comprehensive test suite",
        "Adding fantasy points or betting odds"
      ],
      "final_system_prompt_sections": [
        "Docker Deployment (Dockerfile, docker-compose, environment)",
        "Testing Strategies (mock ESPN, fixtures, integration tests)",
        "Production Monitoring (health checks, alerting, log analysis)",
        "Advanced Troubleshooting (connection pooling, memory leaks, rate limit errors)",
        "Future Enhancements (new data sources, new scrapers, optimization)"
      ]
    },

    "tasks": [
      {
        "task_id": "P3-1",
        "description": "Finalize persona",
        "subtasks": [
          "Add 3 final expertise areas (total: 18)",
          "Add 2 final use cases (total: 12)",
          "Add final 200-400 lines to system prompt",
          "Polish all sections for clarity",
          "Final schema validation"
        ]
      },
      {
        "task_id": "P3-2",
        "description": "Update all documentation",
        "subtasks": [
          "Update PERSONAS-CREATED.md (add nfl-scraper-expert section)",
          "Update my-guide.md (add to personas list, slash commands)",
          "Update CLAUDE.md (persona count, implementation status)",
          "Update README.md (4 personas, update stats)",
          "Update index.html (add persona card, update stats dashboard)"
        ]
      },
      {
        "task_id": "P3-3",
        "description": "Comprehensive testing",
        "subtasks": [
          "Test persona loading and activation",
          "Verify all 18 expertise areas covered in responses",
          "Test all 12 use cases with sample questions",
          "Verify documentation accuracy",
          "Test slash command activation"
        ]
      },
      {
        "task_id": "P3-4",
        "description": "Final commit and push",
        "subtasks": [
          "Git add all Phase 3 files",
          "Commit with 'Phase 3: Complete nfl-scraper-expert persona + documentation'",
          "Push to GitHub",
          "Verify on GitHub"
        ]
      }
    ],

    "success_criteria": [
      "System prompt 1600-2400 lines (final)",
      "18 expertise areas",
      "12 use cases",
      "All documentation updated and accurate",
      "All tests passing",
      "Persona provides comprehensive NFL scraping guidance",
      "Ready for production use"
    ],

    "exit_criteria": "Phase 3 complete when nfl-scraper-expert persona is fully implemented, documented, tested, and ready for production use. Persona count: 4 (mcp-expert, docs-expert, coderef-expert, nfl-scraper-expert)"
  },

  "phase_summary": {
    "phase_1": {
      "focus": "Foundation",
      "system_prompt": "800-1200 lines",
      "expertise": "10 areas",
      "use_cases": "8",
      "time": "1.5-2 hours"
    },
    "phase_2": {
      "focus": "Advanced Scrapers",
      "system_prompt": "1400-2000 lines (+600-800)",
      "expertise": "15 areas (+5)",
      "use_cases": "10 (+2)",
      "time": "1.5-2 hours"
    },
    "phase_3": {
      "focus": "Polish & Documentation",
      "system_prompt": "1600-2400 lines (+200-400)",
      "expertise": "18 areas (+3)",
      "use_cases": "12 (+2)",
      "time": "1-1.5 hours"
    }
  },

  "rollback_strategy": {
    "phase_1_failure": "Delete personas/base/nfl-scraper-expert.json and .claude/commands/nfl-scraper-expert.md. No other changes made yet.",
    "phase_2_failure": "Revert to Phase 1 version of persona (keep Phase 1 commit). Phase 1 is still functional.",
    "phase_3_failure": "Revert to Phase 2 version. Phase 2 persona is fully functional, just missing final polish and documentation updates."
  },

  "advantages_of_phased_approach": [
    "Manageable system prompt length at each phase (never too large)",
    "Can test and validate after each phase",
    "Easier to debug issues at each stage",
    "Can pause between phases without losing progress",
    "Iterative improvement ensures quality",
    "Each phase delivers working persona (Phase 1 = basic, Phase 2 = advanced, Phase 3 = complete)",
    "Reduces risk of overwhelming context or errors",
    "Allows for feedback and adjustment between phases"
  ],

  "decision_points": {
    "after_phase_1": {
      "question": "Is Phase 1 persona providing accurate basic guidance?",
      "if_yes": "Proceed to Phase 2",
      "if_no": "Refine Phase 1 before continuing"
    },
    "after_phase_2": {
      "question": "Is Phase 2 persona covering all scraper patterns correctly?",
      "if_yes": "Proceed to Phase 3",
      "if_no": "Refine Phase 2 before continuing"
    },
    "after_phase_3": {
      "question": "Is documentation complete and accurate?",
      "if_yes": "Mark WO-NFL-SCRAPER-PERSONA-001 as COMPLETE",
      "if_no": "Refine Phase 3 documentation"
    }
  },

  "quality_gates": {
    "phase_1_gate": [
      "Persona loads without errors",
      "Schema validation passes",
      "System prompt 800-1200 lines",
      "10 expertise areas present",
      "8 use cases documented",
      "AI provides accurate basic next-scraper guidance"
    ],
    "phase_2_gate": [
      "System prompt 1400-2000 lines",
      "15 expertise areas present",
      "10 use cases documented",
      "AI knows all 5 scraper patterns",
      "No performance degradation"
    ],
    "phase_3_gate": [
      "System prompt 1600-2400 lines",
      "18 expertise areas present",
      "12 use cases documented",
      "All documentation updated",
      "All tests passing",
      "Ready for production"
    ]
  },

  "recommended_execution": {
    "day_1": "Execute Phase 1 (1.5-2 hours), test, commit",
    "day_1_or_2": "Execute Phase 2 (1.5-2 hours), test, commit",
    "day_2_or_3": "Execute Phase 3 (1-1.5 hours), test, commit, celebrate!",
    "total_calendar_time": "1-3 days (4-6 hours actual work)",
    "note": "Can be done in single session if desired, but phasing allows for breaks and validation"
  }
}
