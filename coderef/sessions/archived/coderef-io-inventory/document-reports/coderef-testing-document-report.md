# Document Report: coderef-testing

**Workorder:** WO-CODEREF-IO-INVENTORY-002
**Agent:** coderef-testing
**Agent Path:** C:\Users\willh\.mcp-servers\coderef-testing
**Date:** 2026-01-02

---

## Complete Document List

| Filename | Type | I/O | Source/Destination | Notes |
|----------|------|-----|-------------------|-------|
| plan.json | workflow_doc | input | coderef-workflow → coderef/workorder/{feature}/ | Read testing strategy for proof reports |
| drift.json | coderef_output | input | coderef-context → .coderef/ | Impact-based test selection |
| index.json | coderef_output | input | coderef-context → .coderef/ | Fallback for changed files detection |
| package.json | config | input | Project root (any project) | Detect jest/vitest/mocha frameworks |
| pytest.ini | config | input | Project root (Python projects) | Detect pytest framework |
| pyproject.toml | config | input | Project root (Python projects) | Detect pytest config and version |
| conftest.py | config | input | Project root (pytest projects) | Detect pytest test presence |
| Cargo.toml | config | input | Project root (Rust projects) | Detect cargo/rust tests |
| .mocharc.json | config | input | Project root (mocha projects) | Detect mocha framework config |
| .mocharc.js | config | input | Project root (mocha projects) | Detect mocha framework config |
| .mocharc.cjs | config | input | Project root (mocha projects) | Detect mocha framework config |
| jest.config.js | config | input | Project root (jest projects) | Detect jest config file path |
| jest.config.ts | config | input | Project root (jest projects) | Detect jest config file path |
| vitest.config.ts | config | input | Project root (vitest projects) | Detect vitest config file path |
| vitest.config.js | config | input | Project root (vitest projects) | Detect vitest config file path |
| .jest-results.json | other | both | Project root (generated by jest) | Parse jest test results (temp file) |
| .vitest-results.json | other | both | Project root (generated by vitest) | Parse vitest test results (temp file) |
| .test-archive/*.json | other | both | Project root/.test-archive/ | Read/write historical test results |
| CLAUDE.md | foundation_doc | input | coderef-testing root | AI agent context (not programmatic) |
| README.md | foundation_doc | input | coderef-testing root | User documentation (not programmatic) |
| {feature}-testing-proof.md | workflow_doc | output | coderef/workorder/{feature}/ | Testing proof report with plan comparison |

---

## Cross-Agent Dependencies

### Inputs from Other Agents

| Source Agent | Document | Purpose |
|--------------|----------|---------|
| coderef-workflow | plan.json | Read section 7 (testing_strategy) for proof report generation |
| coderef-context | drift.json | Enable impact-based test selection (only run tests for changed files) |
| coderef-context | index.json | Fallback when drift.json unavailable for changed file detection |

### Outputs Consumed by Other Agents

| Consumer Agent | Document | Purpose |
|----------------|----------|---------|
| coderef-workflow | {feature}-testing-proof.md | Test validation documentation in DELIVERABLES workflow |
| Any agent | .test-archive/*.json | Historical test metrics for regression analysis |

---

## External Sources

### Framework-Specific Config Files (Read Only)

**Source:** User-configured project files (not generated by coderef ecosystem)

- **Python/pytest:** pytest.ini, pyproject.toml, conftest.py
- **JavaScript/jest:** package.json, jest.config.js, jest.config.ts
- **JavaScript/vitest:** package.json, vitest.config.ts, vitest.config.js
- **JavaScript/mocha:** package.json, .mocharc.json, .mocharc.js, .mocharc.cjs
- **Rust/cargo:** Cargo.toml

**Usage:** Auto-detection of test frameworks and version extraction

### Temporary Test Result Files (Generated by Test Frameworks)

**Source:** Test framework execution (jest, vitest)

- **.jest-results.json** - Generated by jest with `--json --outputFile` flags
- **.vitest-results.json** - Generated by vitest with `--reporter=json --outputFile` flags

**Usage:** Parse test results into unified schema, then deleted

---

## Summary

**Total Documents:** 21 unique filenames
**Inputs:** 20 documents
**Outputs:** 4 documents
**Both (I/O):** 3 documents (.jest-results.json, .vitest-results.json, .test-archive/*.json)

**Cross-Agent Dependencies:**
- **Consumes from:** coderef-workflow (1 doc), coderef-context (2 docs)
- **Produces for:** coderef-workflow (1 doc), any agent (1 doc)

**External Sources:**
- **Framework configs:** 13 documents (read-only, user-maintained)
- **Temp test results:** 2 documents (generated by frameworks, parsed and deleted)

---

## Notes

1. **Framework-agnostic:** Supports 5 test frameworks (pytest, jest, vitest, cargo, mocha) with unified I/O
2. **Impact-based testing:** Primary use of .coderef/ outputs is drift.json for selective test execution
3. **Minimal coderef integration:** Only uses 2 of 8+ .coderef/ outputs (drift.json, index.json)
4. **Opportunity for expansion:** Could integrate complexity.json, coverage.json, graph.json for smarter testing
5. **Temp file management:** .jest-results.json and .vitest-results.json are transient (created, parsed, deleted)
6. **Historical archival:** .test-archive/*.json files accumulate over time (never deleted, used for trend analysis)

---

**Report Generated:** 2026-01-02
**Workorder:** WO-CODEREF-IO-INVENTORY-002
**Agent:** coderef-testing
