{
  "workorder_id": "WO-CONTEXT-EXPERTS-STACKS-001",
  "feature_name": "context-experts-stacks",
  "status": "STUB",
  "created": "2025-12-15",
  "description": "Context experts system built from official documentation sources for technology stacks",

  "concept": {
    "summary": "Create context experts that are trained/configured from official documentation sources, organized by technology stack",
    "goal": "Provide accurate, authoritative guidance for specific technologies by grounding context experts in official docs",
    "key_insight": "Official documentation is the most reliable source - experts should cite and reference it"
  },

  "architecture": {
    "stack_definition": {
      "description": "A stack is a collection of related technologies with official documentation sources",
      "example": {
        "name": "fastapi-sqlalchemy-stack",
        "technologies": ["FastAPI", "SQLAlchemy", "Pydantic", "Alembic"],
        "sources": [
          {"name": "FastAPI Docs", "url": "https://fastapi.tiangolo.com/", "type": "official"},
          {"name": "SQLAlchemy Docs", "url": "https://docs.sqlalchemy.org/", "type": "official"},
          {"name": "Pydantic Docs", "url": "https://docs.pydantic.dev/", "type": "official"},
          {"name": "Alembic Docs", "url": "https://alembic.sqlalchemy.org/", "type": "official"}
        ]
      }
    },

    "expert_structure": {
      "description": "Each expert is grounded in specific official sources",
      "fields": {
        "name": "Expert identifier (e.g., 'fastapi-expert')",
        "stack": "Reference to stack definition",
        "primary_sources": "Official docs this expert is authoritative on",
        "expertise_areas": "Specific topics within the stack",
        "response_style": "How to cite sources in responses"
      }
    },

    "source_types": {
      "official": "Vendor/maintainer documentation (highest trust)",
      "reference": "API references, type definitions",
      "tutorial": "Official tutorials and guides",
      "community": "Vetted community resources (lower trust, requires citation)"
    }
  },

  "proposed_stacks": [
    {
      "name": "python-web-stack",
      "description": "Python web development with FastAPI",
      "technologies": ["Python", "FastAPI", "SQLAlchemy", "Pydantic", "pytest"],
      "official_sources": [
        "https://docs.python.org/3/",
        "https://fastapi.tiangolo.com/",
        "https://docs.sqlalchemy.org/",
        "https://docs.pydantic.dev/",
        "https://docs.pytest.org/"
      ]
    },
    {
      "name": "react-typescript-stack",
      "description": "React frontend with TypeScript",
      "technologies": ["React", "TypeScript", "Vite", "TailwindCSS"],
      "official_sources": [
        "https://react.dev/",
        "https://www.typescriptlang.org/docs/",
        "https://vitejs.dev/guide/",
        "https://tailwindcss.com/docs"
      ]
    },
    {
      "name": "mcp-development-stack",
      "description": "MCP server development",
      "technologies": ["MCP Protocol", "Python MCP SDK", "Claude Code"],
      "official_sources": [
        "https://spec.modelcontextprotocol.io/",
        "https://github.com/anthropics/mcp",
        "https://docs.anthropic.com/"
      ]
    },
    {
      "name": "nextjs-fullstack",
      "description": "Next.js full-stack development",
      "technologies": ["Next.js", "React", "Prisma", "tRPC"],
      "official_sources": [
        "https://nextjs.org/docs",
        "https://react.dev/",
        "https://www.prisma.io/docs",
        "https://trpc.io/docs"
      ]
    }
  ],

  "implementation_phases": [
    {
      "phase": 1,
      "name": "Stack Definition Schema",
      "tasks": [
        "Define JSON schema for stack definitions",
        "Create validation for official source URLs",
        "Build stack registry in coderef/stacks/"
      ]
    },
    {
      "phase": 2,
      "name": "Source Ingestion",
      "tasks": [
        "WebFetch integration for official docs",
        "Cache mechanism for fetched content",
        "Content extraction and indexing"
      ]
    },
    {
      "phase": 3,
      "name": "Expert Generation",
      "tasks": [
        "Generate expert prompts from stack sources",
        "Citation format for responses",
        "Integration with personas-mcp"
      ]
    },
    {
      "phase": 4,
      "name": "Query Interface",
      "tasks": [
        "MCP tool: query_stack_expert",
        "Source citation in responses",
        "Confidence scoring based on source coverage"
      ]
    }
  ],

  "mcp_tools_proposed": [
    {
      "name": "list_stacks",
      "description": "List available technology stacks",
      "output": "Array of stack names and descriptions"
    },
    {
      "name": "get_stack_info",
      "description": "Get detailed info about a stack including sources",
      "input": {"stack_name": "string"},
      "output": "Stack definition with all sources"
    },
    {
      "name": "query_stack_expert",
      "description": "Ask a question to a stack-specific expert",
      "input": {
        "stack_name": "string",
        "question": "string",
        "cite_sources": "boolean (default: true)"
      },
      "output": "Expert response with source citations"
    },
    {
      "name": "refresh_stack_sources",
      "description": "Re-fetch and update cached documentation",
      "input": {"stack_name": "string"},
      "output": "Update status and timestamp"
    }
  ],

  "example_usage": {
    "scenario": "User asks about FastAPI dependency injection",
    "flow": [
      "1. User: 'How does dependency injection work in FastAPI?'",
      "2. System: Routes to python-web-stack expert",
      "3. Expert: Consults cached FastAPI docs on dependencies",
      "4. Response: Explanation with citation to https://fastapi.tiangolo.com/tutorial/dependencies/",
      "5. Confidence: HIGH (topic covered in primary source)"
    ]
  },

  "benefits": [
    "Authoritative answers grounded in official documentation",
    "Clear source citations for verification",
    "Confidence scoring based on source coverage",
    "Stack-specific expertise without hallucination",
    "Updatable as documentation evolves"
  ],

  "next_steps": [
    "Review and refine stack definitions",
    "Design JSON schema for stacks",
    "Prototype source ingestion with WebFetch",
    "Integrate with personas-mcp for expert activation"
  ]
}
