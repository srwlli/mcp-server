{
  "feature_name": "mcp-workflow-improvements",
  "description": "Suite of tools to automate MCP workflow inputs, tracking, and outputs. More automated entries, more automated exits.",
  "created": "2025-12-07T13:30:00Z",
  "status": "context-gathered",

  "workflow_phases": {
    "input_sources": {
      "description": "Tools that automatically create context.json from various triggers",
      "current": ["manual /gather-context"],
      "tool_count": 13
    },
    "planning": {
      "description": "Tools that enhance /start-feature planning",
      "current": ["/start-feature", "/create-plan", "/assess-risk"],
      "tool_count": 3
    },
    "implementation": {
      "description": "Tools that track work during implementation",
      "current": ["manual tracking"],
      "tool_count": 3
    },
    "completion": {
      "description": "Tools that automate completion phase",
      "current": ["/update-deliverables", "/update-docs", "/archive-feature"],
      "tool_count": 5
    },
    "guards": {
      "description": "Tools that prevent mistakes",
      "current": ["manual review"],
      "tool_count": 1
    },
    "cleanup": {
      "description": "Tools that maintain hygiene",
      "current": ["manual cleanup"],
      "tool_count": 2
    },
    "quality": {
      "description": "Tools that measure code quality",
      "current": ["manual audits"],
      "tool_count": 2
    },
    "railway_automation": {
      "description": "Cloud-hosted automation on Railway",
      "current": ["docs-mcp HTTP endpoint"],
      "tool_count": 10
    }
  },

  "proposed_tools": {
    "input_tools": [
      {
        "id": 1,
        "name": "qr-feedback-system",
        "trigger": "Click UI element",
        "output": "context.json with file/line/element context",
        "status": "context-gathered",
        "priority": "high"
      },
      {
        "id": 2,
        "name": "error-to-context",
        "trigger": "Console error thrown",
        "output": "context.json with stack trace, file, error message",
        "how": "Global error handler captures + writes to coderef/working/",
        "priority": "high"
      },
      {
        "id": 3,
        "name": "meeting-to-tasks",
        "trigger": "Meeting transcript uploaded",
        "output": "Multiple stub.json files, one per action item",
        "how": "Parse transcript for action items, extract assignee/topic",
        "priority": "medium"
      },
      {
        "id": 4,
        "name": "dep-watch",
        "trigger": "Package dependency has breaking update",
        "output": "context.json with package name, breaking changes, affected files",
        "how": "Monitor npm/pip advisories, compare with package.json",
        "priority": "medium"
      },
      {
        "id": 5,
        "name": "test-gap-finder",
        "trigger": "Manual or scheduled scan",
        "output": "context.json per untested critical path",
        "how": "Analyze coderef coverage data, identify high-impact gaps",
        "priority": "low"
      },
      {
        "id": 6,
        "name": "pr-to-context",
        "trigger": "PR opened or review requested",
        "output": "context.json from PR description + diff summary",
        "how": "GitHub webhook parses PR, extracts scope and files",
        "priority": "medium"
      },
      {
        "id": 7,
        "name": "slack-to-stub",
        "trigger": "Slack message tagged #feedback or emoji reaction",
        "output": "stub.json from message content",
        "how": "Slack bot listens for triggers, parses message",
        "priority": "low"
      },
      {
        "id": 8,
        "name": "figma-diff",
        "trigger": "Figma file version updated",
        "output": "context.json with design changes, affected components",
        "how": "Figma webhook + API to detect changed frames",
        "priority": "low"
      },
      {
        "id": 9,
        "name": "api-break-detect",
        "trigger": "API response schema differs from expected",
        "output": "context.json with breaking fields, endpoint, diff",
        "how": "Compare API responses against stored schemas",
        "priority": "medium"
      },
      {
        "id": 10,
        "name": "bundle-budget",
        "trigger": "Bundle size exceeds threshold",
        "output": "context.json for optimization task",
        "how": "Post-build check, compare against budget in config",
        "priority": "low"
      },
      {
        "id": 11,
        "name": "dead-code-finder",
        "trigger": "Scheduled scan or pre-commit",
        "output": "context.json per dead code area",
        "how": "Analyze coderef for unused exports/functions",
        "priority": "low"
      },
      {
        "id": 12,
        "name": "a11y-scanner",
        "trigger": "Page load or CI pipeline",
        "output": "context.json per accessibility violation",
        "how": "axe-core or similar, group by component",
        "priority": "medium"
      },
      {
        "id": 13,
        "name": "perf-regression",
        "trigger": "Lighthouse score drops below threshold",
        "output": "context.json with metrics delta, suspected cause",
        "how": "Compare Lighthouse runs, identify regression source",
        "priority": "low"
      }
    ],
    "planning_tools": [
      {
        "id": 14,
        "name": "refactor-preview",
        "trigger": "Before /start-feature on refactor task",
        "output": "Impact report: files affected, tests that would break",
        "how": "Dry-run rename/move using coderef relationships",
        "priority": "medium"
      },
      {
        "id": 15,
        "name": "snippet-library",
        "trigger": "Save pattern or search library",
        "output": "Reusable code patterns with coderef context",
        "how": "Tag snippets with domain, link to source files",
        "priority": "low"
      },
      {
        "id": 16,
        "name": "plan-templates",
        "trigger": "Save successful plan as template",
        "output": "Reusable plan structure for similar features",
        "how": "Extract pattern from completed plan, parameterize",
        "priority": "low"
      }
    ],
    "implementation_tools": [
      {
        "id": 17,
        "name": "time-tracker",
        "trigger": "Auto-start when working in feature folder",
        "output": "Time entries in feature folder",
        "how": "Detect active file paths, aggregate time per feature",
        "fills": "DELIVERABLES.md time_spent field",
        "priority": "high"
      },
      {
        "id": 18,
        "name": "visual-diff",
        "trigger": "Manual capture or git hook",
        "output": "Before/after screenshots in feature folder",
        "how": "Puppeteer/Playwright captures at key commits",
        "attaches_to": "DELIVERABLES.md, archive",
        "priority": "medium"
      },
      {
        "id": 19,
        "name": "env-drift",
        "trigger": ".env.example differs from .env structure",
        "output": "Alert + context.json with missing/extra vars",
        "how": "Compare env files, detect drift",
        "priority": "low"
      }
    ],
    "completion_tools": [
      {
        "id": 20,
        "name": "commit-to-changelog",
        "trigger": "Git commits with conventional format",
        "output": "Auto-populated changelog entries",
        "how": "Parse feat:/fix:/breaking: prefixes → changelog",
        "priority": "high"
      },
      {
        "id": 21,
        "name": "stale-docs-alert",
        "trigger": "Code changes without doc updates",
        "output": "Alert or auto-trigger /update-docs",
        "how": "Compare file timestamps: src/* newer than docs/*",
        "priority": "medium"
      },
      {
        "id": 22,
        "name": "rollback-ready",
        "trigger": "Before /archive-feature",
        "output": "Checklist: can this feature be safely reverted?",
        "how": "Check for migrations, breaking changes, dependencies",
        "priority": "low"
      },
      {
        "id": 23,
        "name": "changelog-notify",
        "trigger": "Changelog updated or release tagged",
        "output": "Post to Slack/Discord with changelog summary",
        "how": "Webhook on changelog change, format for chat",
        "priority": "low"
      },
      {
        "id": 24,
        "name": "retro-generator",
        "trigger": "After /archive-feature",
        "output": "Retro summary: what went well, what to improve",
        "how": "Analyze time, commits, plan accuracy, generate insights",
        "priority": "low"
      }
    ],
    "guard_tools": [
      {
        "id": 25,
        "name": "secret-detector",
        "trigger": "Pre-commit hook",
        "output": "Block commit if potential secret found",
        "how": "Regex patterns for API keys, passwords, tokens",
        "priority": "high"
      }
    ],
    "cleanup_tools": [
      {
        "id": 26,
        "name": "branch-stale",
        "trigger": "Branch inactive > 7 days",
        "output": "Reminder notification or auto-archive prompt",
        "how": "Scan branches, check last commit date",
        "priority": "low"
      },
      {
        "id": 27,
        "name": "feature-orphan",
        "trigger": "coderef/working/ folder with no activity > 14 days",
        "output": "Prompt: archive, continue, or delete?",
        "how": "Scan working folders, check file timestamps",
        "priority": "low"
      }
    ],
    "quality_tools": [
      {
        "id": 28,
        "name": "doc-coverage",
        "trigger": "Manual or CI pipeline",
        "output": "Report: % of exports with JSDoc + context.json for gaps",
        "how": "Parse AST, count documented vs undocumented exports",
        "priority": "low"
      },
      {
        "id": 29,
        "name": "type-coverage",
        "trigger": "Manual or CI pipeline",
        "output": "Report: % of code with TypeScript types + context.json for gaps",
        "how": "TypeScript compiler API, count any vs typed",
        "priority": "low"
      }
    ],
    "motivation_tools": [
      {
        "id": 30,
        "name": "commit-streak",
        "trigger": "Daily check",
        "output": "Streak counter, badges, notifications",
        "how": "Track daily commits, gamify consistency",
        "priority": "low"
      }
    ],
    "railway_automation_tools": [
      {
        "id": 31,
        "name": "webhook-hub",
        "trigger": "GitHub/Slack/Figma POST to Railway",
        "output": "Routes to appropriate handler, creates context.json",
        "how": "Central webhook receiver with routing logic",
        "endpoints": ["/webhook/github", "/webhook/slack", "/webhook/figma"],
        "priority": "high"
      },
      {
        "id": 32,
        "name": "scheduled-scans",
        "trigger": "Cron jobs (daily/weekly)",
        "output": "Batch context.json files for issues found",
        "how": "Railway cron runs dep-watch, stale-docs, orphan checks",
        "schedule": {
          "daily": ["dep-watch", "stale-docs-alert"],
          "weekly": ["feature-orphan", "metrics-rollup"],
          "hourly": ["notification-digest"]
        },
        "priority": "medium"
      },
      {
        "id": 33,
        "name": "pr-watcher",
        "trigger": "GitHub PR webhook",
        "output": "context.json auto-created for each PR",
        "how": "Parse PR description + diff, extract scope",
        "priority": "medium"
      },
      {
        "id": 34,
        "name": "error-collector",
        "trigger": "POST from client apps",
        "output": "context.json per error with stack trace",
        "how": "Central error ingestion endpoint",
        "endpoint": "/api/error",
        "priority": "high"
      },
      {
        "id": 35,
        "name": "feedback-api",
        "trigger": "POST from qr-feedback-system",
        "output": "context.json + screenshot stored",
        "how": "Receives feedback, stores to Cloudinary, creates context",
        "endpoint": "/api/feedback",
        "priority": "high"
      },
      {
        "id": 36,
        "name": "mobile-bridge",
        "trigger": "POST from mobile devices",
        "output": "context.json + cloud screenshot",
        "how": "Receives mobile feedback, handles cloud storage",
        "endpoint": "/api/mobile",
        "priority": "medium"
      },
      {
        "id": 37,
        "name": "git-sync",
        "trigger": "After context.json created on Railway",
        "output": "Auto-commits to GitHub repo",
        "how": "Uses GitHub API to commit context.json to repo",
        "priority": "high"
      },
      {
        "id": 38,
        "name": "notify-dispatch",
        "trigger": "Any tool completion",
        "output": "Notification sent to appropriate channel",
        "how": "Routes notifications to Slack/Discord/email based on config",
        "priority": "medium"
      },
      {
        "id": 39,
        "name": "dashboard-api",
        "trigger": "GET requests",
        "output": "JSON with workflow status, metrics, pending items",
        "how": "Aggregates data from all tools for dashboard UI",
        "endpoints": ["/api/status", "/api/metrics", "/api/pending"],
        "priority": "low"
      },
      {
        "id": 40,
        "name": "changelog-broadcaster",
        "trigger": "Changelog updated",
        "output": "Posts summary to Slack/Discord",
        "how": "Watches changelog, formats and sends to channels",
        "priority": "low"
      }
    ]
  },

  "railway_architecture": {
    "url": "https://docs-mcp-production.up.railway.app",
    "inbound_endpoints": {
      "webhooks": [
        { "path": "/webhook/github", "source": "GitHub", "handles": "PR, push, issues" },
        { "path": "/webhook/slack", "source": "Slack", "handles": "Messages, reactions" },
        { "path": "/webhook/figma", "source": "Figma", "handles": "File updates" }
      ],
      "api": [
        { "path": "/api/feedback", "source": "qr-feedback-system", "handles": "UI feedback + screenshots" },
        { "path": "/api/error", "source": "Client apps", "handles": "Error reports" },
        { "path": "/api/mobile", "source": "Mobile devices", "handles": "Mobile feedback" }
      ],
      "status": [
        { "path": "/api/status", "returns": "Workflow status" },
        { "path": "/api/metrics", "returns": "Aggregated metrics" },
        { "path": "/api/pending", "returns": "Pending context.json items" }
      ]
    },
    "scheduled_jobs": {
      "hourly": ["notification-digest"],
      "daily": ["dep-watch", "stale-docs-alert"],
      "weekly": ["feature-orphan", "metrics-rollup", "branch-stale"]
    },
    "outbound": {
      "github": "git-sync commits context.json to repo",
      "slack": "notify-dispatch sends alerts",
      "discord": "notify-dispatch sends alerts",
      "email": "notify-dispatch sends digests",
      "cloudinary": "screenshot storage"
    },
    "storage": {
      "screenshots": "Cloudinary (Railway filesystem is ephemeral)",
      "context_files": "GitHub repo via git-sync",
      "cache": "Redis/Upstash for queue and temp data"
    }
  },

  "railway_flows": {
    "feedback_flow": {
      "steps": [
        "User clicks feedback dot in UI",
        "Form submits to /api/feedback on Railway",
        "Railway saves screenshot to Cloudinary",
        "Railway creates context.json",
        "git-sync commits to GitHub repo",
        "notify-dispatch alerts Slack",
        "Dev pulls repo, runs /start-feature"
      ]
    },
    "error_flow": {
      "steps": [
        "Client app catches error",
        "POST to /api/error on Railway",
        "Railway creates context.json with stack trace",
        "git-sync commits to GitHub repo",
        "notify-dispatch alerts dev",
        "Dev runs /start-feature for fix"
      ]
    },
    "pr_flow": {
      "steps": [
        "PR opened on GitHub",
        "GitHub webhook to /webhook/github",
        "pr-watcher parses PR, creates context.json",
        "git-sync commits to repo",
        "Ready for /start-feature review workflow"
      ]
    },
    "scheduled_flow": {
      "steps": [
        "Cron triggers scheduled-scans",
        "dep-watch checks for breaking updates",
        "If found, creates context.json",
        "git-sync commits to repo",
        "notify-dispatch alerts team"
      ]
    }
  },

  "tool_summary": {
    "total": 40,
    "by_phase": {
      "input": 13,
      "planning": 3,
      "implementation": 3,
      "completion": 5,
      "guards": 1,
      "cleanup": 2,
      "quality": 2,
      "motivation": 1,
      "railway_automation": 10
    }
  },

  "priority_tiers": {
    "tier_1_high": [
      "qr-feedback-system",
      "error-to-context",
      "time-tracker",
      "commit-to-changelog",
      "secret-detector",
      "webhook-hub",
      "error-collector",
      "feedback-api",
      "git-sync"
    ],
    "tier_2_medium": [
      "meeting-to-tasks",
      "dep-watch",
      "pr-to-context",
      "api-break-detect",
      "a11y-scanner",
      "refactor-preview",
      "visual-diff",
      "stale-docs-alert",
      "scheduled-scans",
      "pr-watcher",
      "mobile-bridge",
      "notify-dispatch"
    ],
    "tier_3_low": [
      "test-gap-finder",
      "slack-to-stub",
      "figma-diff",
      "bundle-budget",
      "dead-code-finder",
      "perf-regression",
      "snippet-library",
      "plan-templates",
      "env-drift",
      "rollback-ready",
      "changelog-notify",
      "retro-generator",
      "branch-stale",
      "feature-orphan",
      "doc-coverage",
      "type-coverage",
      "commit-streak",
      "dashboard-api",
      "changelog-broadcaster"
    ]
  },

  "workflow_diagram": {
    "input": "13 local triggers + 10 Railway triggers → context.json",
    "railway": "Webhooks + API + Cron → process → git-sync → notify",
    "plan": "context.json → /start-feature → plan.json",
    "implement": "Implementation (3 tools track progress)",
    "complete": "5 tools automate completion",
    "result": "Full automation: any trigger → Railway → repo → pipeline"
  },

  "success_metrics": {
    "before": "Manual context gathering, manual time tracking, manual changelog",
    "after": "Auto-captured context from any source, auto-synced to repo, auto-notified",
    "goal": "80% of workflow inputs automated, 90% of completion automated, 100% cloud-synced"
  },

  "notes": "Railway acts as central automation hub. All external triggers route through Railway, get processed, git-synced to repo, and notify team. Local tools still work standalone, Railway extends reach to webhooks, mobile, scheduled jobs."
}
