{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://papertrail/schemas/documentation/workorder-doc-frontmatter-schema.json",
  "title": "Workorder Document YAML Front Matter Schema",
  "description": "Validates YAML front matter for workorder docs generated by coderef-workflow",
  "version": "1.0.0",
  "allOf": [
    {
      "$ref": "./base-frontmatter-schema.json"
    },
    {
      "type": "object",
      "required": [
        "workorder_id",
        "generated_by",
        "feature_id",
        "doc_type"
      ],
      "properties": {
        "workorder_id": {
          "type": "string",
          "description": "Workorder ID (format: WO-{FEATURE}-{CATEGORY}-###)",
          "pattern": "^WO-[A-Z0-9-]+-\\d{3}$"
        },
        "generated_by": {
          "type": "string",
          "description": "MCP server that generated this document",
          "pattern": "^coderef-workflow"
        },
        "feature_id": {
          "type": "string",
          "description": "Feature identifier (kebab-case)",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$",
          "minLength": 1,
          "maxLength": 100
        },
        "doc_type": {
          "type": "string",
          "description": "Type of workorder document",
          "enum": [
            "plan",
            "deliverables",
            "context",
            "analysis",
            "instructions"
          ]
        },
        "title": {
          "type": "string",
          "description": "Optional: Document title",
          "minLength": 1,
          "maxLength": 200
        },
        "version": {
          "type": "string",
          "description": "Optional: Document version (semver)",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "status": {
          "type": "string",
          "description": "Optional: Workorder status",
          "enum": [
            "draft",
            "in_progress",
            "blocked",
            "review",
            "complete",
            "archived"
          ]
        },
        "timestamp": {
          "type": "string",
          "description": "Optional: ISO 8601 timestamp",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"
        }
      }
    }
  ]
}