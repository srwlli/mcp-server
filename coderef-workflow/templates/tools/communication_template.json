{
  "feature": "FEATURE_NAME_IN_CAPS",
  "workorder_id": "WO-FEATURE-NAME-001",
  "from": "Agent 1",
  "to": "Agent N",
  "date": "YYYY-MM-DD",
  "task": "One-line summary of what needs to be done",
  "instruction": "Single sentence directive for executing agent",
  "tasks": [
    {
      "id": "STEP-001",
      "description": "Read {file_path}:{line_start}-{line_end} to understand current implementation",
      "status": "pending",
      "completed_at": null,
      "notes": null
    },
    {
      "id": "STEP-002",
      "description": "Implement {feature_name} in {file_path}:{line_number}",
      "status": "pending",
      "completed_at": null,
      "notes": null
    },
    {
      "id": "STEP-003",
      "description": "Add helper function {function_name}() to {file_path}",
      "status": "pending",
      "completed_at": null,
      "notes": null
    },
    {
      "id": "STEP-004",
      "description": "Update tests in {test_file_path}",
      "status": "pending",
      "completed_at": null,
      "notes": null
    },
    {
      "id": "STEP-005",
      "description": "Run tests: {test_command}",
      "status": "pending",
      "completed_at": null,
      "notes": null
    },
    {
      "id": "STEP-006",
      "description": "Create documentation in {docs_path}",
      "status": "pending",
      "completed_at": null,
      "notes": null
    },
    {
      "id": "STEP-007",
      "description": "Verify forbidden files unchanged: git diff {forbidden_file}",
      "status": "pending",
      "completed_at": null,
      "notes": null
    },
    {
      "id": "STEP-008",
      "description": "Build project: {build_command}",
      "status": "pending",
      "completed_at": null,
      "notes": null
    },
    {
      "id": "STEP-009",
      "description": "Commit changes: '{commit_message}'",
      "status": "pending",
      "completed_at": null,
      "notes": null
    }
  ],
  "progress": {
    "total": 9,
    "complete": 0,
    "in_progress": 0,
    "pending": 9,
    "blocked": 0,
    "percent": 0
  },
  "details": {
    "work_area": "specific/directory/to/work/in",
    "forbidden_files": [
      "{file_path} - DO NOT MODIFY (reason: production system)",
      "{file_path} - DO NOT MODIFY (reason: working implementation)"
    ],
    "allowed_files": [
      "{file_path} - What to modify and why",
      "{file_path} - What to add or change"
    ],
    "context": {
      "feature_name": "Feature being implemented",
      "goal": "What this feature accomplishes",
      "dependencies": ["List of features this depends on"],
      "references": ["plan.json section 4_key_features", "context.json requirements"]
    }
  },
  "testing_checklist": [
    "1. Create test case for {feature_name}",
    "2. Run unit tests: {unit_test_command}",
    "3. Run integration tests: {integration_test_command}",
    "4. Verify output matches expected results",
    "5. Test edge cases: {edge_case_1}, {edge_case_2}",
    "6. Verify forbidden files unchanged: git diff {forbidden_files}"
  ],
  "success_criteria": [
    "✅ {Feature_name} implemented and working correctly",
    "✅ All unit tests passing",
    "✅ All integration tests passing",
    "✅ Forbidden files unchanged (verified via git diff)",
    "✅ Project builds without errors",
    "✅ Documentation created and complete",
    "✅ Code follows existing patterns and standards"
  ],
  "agent_1_status": "READY - Planning complete, awaiting agent assignment",
  "agent_N_status": null,
  "agent_N_assigned_at": null,
  "agent_N_completion": {
    "status": null,
    "timestamp": null,
    "changes_made": [],
    "verification": {
      "forbidden_files_unchanged": null,
      "tests_passing": null,
      "build_successful": null
    },
    "commit_hash": null,
    "commit_message": null
  },
  "agent_1_verification": {
    "status": null,
    "verified_at": null,
    "verified_by": "Agent 1",
    "code_review": {
      "passed": null,
      "comments": []
    },
    "independent_tests": {
      "passed": null,
      "test_results": []
    },
    "forbidden_files_check": {
      "passed": null,
      "files_verified": []
    },
    "production_integration": {
      "passed": null,
      "integration_tests": []
    },
    "final_approval": null
  },
  "context_experts": {
    "loaded": [],
    "created_this_session": [],
    "suggested": [],
    "stale": []
  },
  "metadata": {
    "created_at": "YYYY-MM-DDTHH:MM:SSZ",
    "updated_at": "YYYY-MM-DDTHH:MM:SSZ",
    "version": "1.0.0",
    "template_version": "1.2.0"
  },
  "handoff_prompt_template": {
    "description": "Standardized prompt template for agent handoffs (STUB-015)",
    "usage": "Use this template when transferring work to another agent",
    "template": "You are being handed off the following work:\n\n## Context\n- **Feature**: {{feature_name}}\n- **Workorder**: {{workorder_id}}\n- **Current Progress**: {{progress_percent}}% ({{completed}}/{{total}} tasks)\n\n## Files\n- **Plan**: coderef/working/{{feature_name}}/plan.json\n- **Communication**: coderef/working/{{feature_name}}/communication.json\n- **Context**: coderef/working/{{feature_name}}/context.json\n\n## Current State\n{{current_state_summary}}\n\n## Next Tasks\n{{next_tasks_list}}\n\n## Important Notes\n- Forbidden files: {{forbidden_files}}\n- Success criteria: {{success_criteria}}\n\n## Instructions\n1. Read the plan.json and communication.json\n2. Continue from the next pending task\n3. Update task status in plan.json as you work\n4. Do not modify forbidden files\n5. Run tests before marking complete",
    "variables": {
      "feature_name": "From communication.json feature field",
      "workorder_id": "From communication.json workorder_id field",
      "progress_percent": "From communication.json progress.percent field",
      "completed": "From communication.json progress.complete field",
      "total": "From communication.json progress.total field",
      "current_state_summary": "Generated from git status and recent commits",
      "next_tasks_list": "First 3 pending tasks from tasks array",
      "forbidden_files": "From communication.json details.forbidden_files",
      "success_criteria": "From communication.json success_criteria"
    }
  }
}
