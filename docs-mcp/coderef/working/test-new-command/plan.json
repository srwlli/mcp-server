{
  "META_DOCUMENTATION": {
    "feature_name": "test-new-command",
    "schema_version": "1.0.0",
    "version": "1.0.0",
    "status": "complete",
    "generated_by": "AI Assistant via /start-feature",
    "has_context": true,
    "has_analysis": true
  },
  "UNIVERSAL_PLANNING_STRUCTURE": {
    "0_preparation": {
      "foundation_docs_available": ["README.md", "USER-GUIDE.md"],
      "foundation_docs_missing": ["API.md", "ARCHITECTURE.md"],
      "technology_stack": {
        "language": "Python",
        "framework": "Flask",
        "testing": "pytest"
      },
      "project_structure": "MCP server with tool handlers and generators"
    },
    "1_executive_summary": {
      "feature_overview": "Test the /start-feature command workflow to verify it correctly orchestrates the full planning pipeline: gather context, analyze project, create plan, and validate.",
      "value_proposition": "Validates that the new unified planning command works correctly, saving users from running 4 separate commands manually.",
      "real_world_analogy": "Like a test drive of a new car - you run through all the features to make sure everything works before using it for real.",
      "primary_use_cases": [
        "Verify /start-feature command executes all steps in sequence",
        "Confirm plan.json is generated with correct schema format",
        "Validate the output documents are created correctly"
      ],
      "success_metrics": [
        "All 5 workflow steps complete without errors",
        "plan.json validates with score >= 90",
        "DELIVERABLES.md is generated automatically"
      ]
    },
    "2_risk_assessment": {
      "complexity": "low",
      "effort_level": 1,
      "risks": [
        {
          "risk": "Schema mismatch in generated plan",
          "mitigation": "Follow schema contract exactly as specified",
          "severity": "medium"
        }
      ],
      "dependencies": ["docs-mcp MCP tools must be running"]
    },
    "3_current_state_analysis": {
      "files_to_create": [
        {"path": "coderef/working/test-new-command/context.json", "purpose": "Store gathered requirements"},
        {"path": "coderef/working/test-new-command/analysis.json", "purpose": "Store project analysis results"},
        {"path": "coderef/working/test-new-command/plan.json", "purpose": "Store implementation plan"},
        {"path": "coderef/working/test-new-command/DELIVERABLES.md", "purpose": "Track implementation progress"}
      ],
      "files_to_modify": [],
      "existing_patterns": "Standard docs-mcp planning workflow"
    },
    "4_key_features": {
      "features": [
        {
          "id": "F1",
          "name": "Documentation Generation",
          "description": "Generate planning documents (context, analysis, plan, deliverables)",
          "priority": "high"
        },
        {
          "id": "F2",
          "name": "Workflow Automation",
          "description": "Automate the 4-step planning process into a single command",
          "priority": "high"
        }
      ]
    },
    "5_task_id_system": {
      "workorder": {
        "id": "WO-TEST-NEW-COMMAND-001",
        "name": "Test New Command",
        "feature_dir": "coderef/working/test-new-command"
      },
      "tasks": [
        {
          "id": "GATHER-001",
          "workorder_id": "WO-TEST-NEW-COMMAND-001",
          "description": "Gather feature context via interactive Q&A and save to context.json",
          "feature": "F2",
          "depends_on": []
        },
        {
          "id": "ANALYZE-001",
          "workorder_id": "WO-TEST-NEW-COMMAND-001",
          "description": "Analyze project structure, tech stack, and gaps then save to analysis.json",
          "feature": "F2",
          "depends_on": ["GATHER-001"]
        },
        {
          "id": "PLAN-001",
          "workorder_id": "WO-TEST-NEW-COMMAND-001",
          "description": "Generate complete 10-section implementation plan following schema contract",
          "feature": "F1",
          "depends_on": ["ANALYZE-001"]
        },
        {
          "id": "VALIDATE-001",
          "workorder_id": "WO-TEST-NEW-COMMAND-001",
          "description": "Validate plan.json scores at least 90 points, fix issues if needed",
          "feature": "F2",
          "depends_on": ["PLAN-001"]
        },
        {
          "id": "DELIVER-001",
          "workorder_id": "WO-TEST-NEW-COMMAND-001",
          "description": "Generate DELIVERABLES.md tracking template from plan structure",
          "feature": "F1",
          "depends_on": ["VALIDATE-001"]
        }
      ]
    },
    "6_implementation_phases": {
      "phases": [
        {
          "phase": 1,
          "name": "Context Gathering",
          "description": "Collect feature requirements through interactive Q&A workflow",
          "complexity": "low",
          "effort_level": 1,
          "tasks": ["GATHER-001"],
          "deliverables": ["context.json with feature requirements"]
        },
        {
          "phase": 2,
          "name": "Project Analysis",
          "description": "Analyze project structure, identify patterns and gaps",
          "complexity": "low",
          "effort_level": 1,
          "tasks": ["ANALYZE-001"],
          "deliverables": ["analysis.json with project insights"]
        },
        {
          "phase": 3,
          "name": "Plan Creation",
          "description": "Synthesize context and analysis into implementation plan",
          "complexity": "medium",
          "effort_level": 2,
          "tasks": ["PLAN-001", "VALIDATE-001"],
          "deliverables": ["plan.json with 10 sections", "Validation score >= 90"]
        },
        {
          "phase": 4,
          "name": "Deliverables Setup",
          "description": "Generate tracking template for implementation progress",
          "complexity": "low",
          "effort_level": 1,
          "tasks": ["DELIVER-001"],
          "deliverables": ["DELIVERABLES.md tracking template"]
        }
      ]
    },
    "7_testing_strategy": {
      "unit_tests": [],
      "integration_tests": [
        "Verify /start-feature runs all 4 MCP tools in sequence",
        "Verify plan.json contains all 10 required sections",
        "Verify DELIVERABLES.md is generated after plan creation"
      ],
      "edge_cases": [
        "Empty requirements list",
        "Missing analysis data",
        "Validation score below 90 triggers retry loop",
        "Invalid feature name format rejected",
        "Null or undefined constraint values handled"
      ],
      "manual_verification": [
        "Review generated plan.json for completeness",
        "Verify workorder ID appears in all tasks"
      ]
    },
    "8_success_criteria": {
      "functional": [
        "All 4 planning steps execute without errors",
        "context.json saved with correct structure",
        "analysis.json saved with project insights",
        "plan.json validates with score >= 90",
        "DELIVERABLES.md generated automatically"
      ],
      "performance": [
        "Complete workflow executes in under 60 seconds",
        "No memory leaks or hanging processes"
      ],
      "quality": [
        "Plan follows schema contract exactly",
        "No placeholder text remains in output",
        "Workorder ID embedded in all tasks"
      ]
    },
    "9_implementation_checklist": {
      "pre_implementation": [
        "Verify docs-mcp server is running",
        "Confirm MCP tools are accessible"
      ],
      "phase_1_context_gathering": [
        "Run interactive Q&A via AskUserQuestion",
        "Call gather_context MCP tool",
        "Verify context.json created"
      ],
      "phase_2_project_analysis": [
        "Call analyze_project_for_planning MCP tool",
        "Verify analysis.json created"
      ],
      "phase_3_plan_creation": [
        "Call create_plan MCP tool",
        "Generate plan.json with all 10 sections",
        "Call validate_implementation_plan",
        "If score < 90, fix issues and re-validate"
      ],
      "phase_4_deliverables": [
        "Call generate_deliverables_template MCP tool",
        "Verify DELIVERABLES.md created"
      ],
      "post_implementation": [
        "Present summary to user",
        "Provide next steps guidance"
      ]
    }
  }
}
