{
  "META_DOCUMENTATION": {
    "workorder_id": "WO-CODEREF-FOUNDATION-002",
    "feature_name": "coderef-foundation-api-md",
    "status": "approved",
    "created_at": "2025-12-15T00:00:00Z"
  },
  "1_executive_summary": {
    "goal": "Enhance /coderef-foundation-docs to be the complete agentic context generator by adding API.md generation",
    "background": "WO-REFINE-CONTEXT-001 is complete. Now consolidating further by adding API.md to /coderef-foundation-docs.",
    "success_criteria": [
      "/coderef-foundation-docs generates API.md with all detected endpoints",
      "API.md includes: endpoints table, auth info, error format",
      "All existing tests pass",
      "New tests for API.md generation pass"
    ]
  },
  "2_current_state": {
    "outputs": {
      "ARCHITECTURE.md": true,
      "SCHEMA.md": true,
      "COMPONENTS.md": "UI projects only",
      "API.md": false,
      "project-context.json": true
    },
    "overlap": "/generate-docs also generates API.md causing confusion"
  },
  "3_target_state": {
    "outputs": {
      "ARCHITECTURE.md": true,
      "SCHEMA.md": true,
      "COMPONENTS.md": "UI projects only",
      "API.md": true,
      "project-context.json": true
    },
    "benefit": "Single command for complete agentic project context"
  },
  "9_implementation_checklist": {
    "phases": [
      {
        "id": "phase_1",
        "name": "Add API.md Generation",
        "tasks": [
          {
            "id": "IMPL-001",
            "description": "Add _generate_api_md() method to CoderefFoundationGenerator",
            "file": "generators/coderef_foundation_generator.py",
            "status": "pending"
          },
          {
            "id": "IMPL-002",
            "description": "Update generate() method to call _generate_api_md() and write API.md",
            "file": "generators/coderef_foundation_generator.py",
            "status": "pending"
          },
          {
            "id": "IMPL-003",
            "description": "Add API.md to files_generated response",
            "file": "generators/coderef_foundation_generator.py",
            "status": "pending"
          }
        ]
      },
      {
        "id": "phase_2",
        "name": "Update Documentation",
        "tasks": [
          {
            "id": "DOC-001",
            "description": "Update coderef-foundation-docs.md slash command to mention API.md",
            "file": ".claude/commands/coderef-foundation-docs.md",
            "status": "pending"
          },
          {
            "id": "DOC-002",
            "description": "Update CLAUDE.md tool description",
            "file": "CLAUDE.md",
            "status": "pending"
          },
          {
            "id": "DOC-003",
            "description": "Verify TOOLS-REFERENCE.md mentions API.md",
            "file": "TOOLS-REFERENCE.md",
            "status": "pending"
          }
        ]
      },
      {
        "id": "phase_3",
        "name": "Testing",
        "tasks": [
          {
            "id": "TEST-001",
            "description": "Add unit tests for _generate_api_md() method",
            "file": "tests/unit/generators/test_coderef_foundation_generator.py",
            "status": "pending"
          },
          {
            "id": "TEST-002",
            "description": "Add integration test for API.md file creation",
            "file": "tests/integration/test_coderef_foundation_docs.py",
            "status": "pending"
          },
          {
            "id": "TEST-003",
            "description": "Run full test suite and verify all pass",
            "status": "pending"
          }
        ]
      }
    ]
  },
  "api_md_structure": {
    "sections": [
      "Overview (framework, auth, error format, endpoint count)",
      "Endpoints (METHOD path, file, framework for each)",
      "Authentication (method details)",
      "Error Handling (format details)"
    ],
    "template": "# API Documentation\n\n## Overview\n- Framework: {frameworks_detected}\n- Authentication: {auth_method}\n- Error Format: {error_format}\n- Total Endpoints: {count}\n\n## Endpoints\n\n### {METHOD} {path}\n- **File:** `{file}`\n- **Framework:** {framework}\n\n## Authentication\n{auth_method details}\n\n## Error Handling\n{error_format details}"
  }
}
