{
  "feature_name": "execute-plan",
  "workorder_id": "WO-EXECUTE-PLAN-001",
  "description": "Implement /execute-plan tool that reads plan.json and generates TodoWrite task list with WO-ID | TASK-ID: Description format for Lloyd's CLI checklist display",
  "goal": "Automate the generation of properly formatted TodoWrite calls when executing an implementation plan, including workorder ID and task ID prefixes for better tracking",
  "requirements": [
    "Read plan.json from coderef/working/{feature_name}/",
    "Extract workorder_id from META_DOCUMENTATION section",
    "Parse all tasks from section 9 (9_implementation_checklist)",
    "Generate TodoWrite format: WO-{FEATURE}-{NUM} | TASK-ID: Description",
    "Include activeForm for in-progress display",
    "Support multi-agent mode (optional - read communication.json)",
    "Log execution in coderef/working/{feature_name}/execution-log.json",
    "Create /execute-plan slash command",
    "Integration with Lloyd persona for automatic execution"
  ],
  "constraints": [
    "Must preserve existing plan.json structure",
    "TodoWrite format must match Claude CLI display requirements",
    "Handle missing workorder_id gracefully (use feature name)",
    "Support both single-agent and multi-agent workflows"
  ],
  "out_of_scope": [
    "Actual task execution (Lloyd/agents do that)",
    "Modifying plan.json during execution",
    "Progress tracking (separate concern - plan.json updates)"
  ],
  "success_criteria": {
    "functional": [
      "Tool reads plan.json and extracts all tasks",
      "TodoWrite format includes WO-ID | TASK-ID: Description",
      "Slash command /execute-plan successfully invokes tool",
      "Execution log created with timestamp and task list"
    ],
    "quality": [
      "Error handling for missing plan.json",
      "Graceful degradation if workorder_id missing",
      "Clear error messages for malformed plans"
    ],
    "integration": [
      "Works with existing /create-plan workflow",
      "Compatible with multi-agent coordination tools",
      "Lloyd can use TodoWrite output in CLI"
    ]
  },
  "example_output": {
    "todowrite_format": [
      {
        "content": "WO-AUTH-001 | SETUP-001: Install pyjwt==2.8.0 and bcrypt==4.0.1 in requirements.txt",
        "activeForm": "WO-AUTH-001 | SETUP-001: Installing dependencies",
        "status": "pending"
      },
      {
        "content": "WO-AUTH-001 | SETUP-002: Create auth/ directory structure with __init__.py",
        "activeForm": "WO-AUTH-001 | SETUP-002: Creating auth directory",
        "status": "pending"
      }
    ]
  },
  "context_gathering": {
    "timestamp": "2025-10-20",
    "gathered_by": "User + Claude",
    "session": "Interactive requirements gathering"
  }
}
