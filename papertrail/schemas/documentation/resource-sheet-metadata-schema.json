{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://papertrail/schemas/documentation/resource-sheet-metadata-schema.json",
  "title": "Resource Sheet YAML Front Matter Schema (RSMS)",
  "description": "Validates YAML front matter in resource/reference sheets for UDS and RSMS compliance",
  "version": "2.0.0",
  "type": "object",
  "required": ["agent", "date", "task", "subject", "parent_project", "category"],
  "properties": {
    "agent": {
      "type": "string",
      "description": "UDS Required: Name of the agent or contributor who created/updated the resource sheet",
      "minLength": 1,
      "maxLength": 100,
      "examples": ["coderef-assistant", "Taylor", "Ava", "Lloyd"]
    },
    "date": {
      "type": "string",
      "description": "UDS Required: Date of creation or last update in YYYY-MM-DD format",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "examples": ["2026-01-04", "2025-12-25"]
    },
    "timestamp": {
      "type": "string",
      "description": "Optional: ISO 8601 timestamp of creation or last update with timezone (supports EST -05:00 or UTC)",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}([+-]\\d{2}:\\d{2}|Z)$",
      "examples": ["2026-01-04T18:45:00-05:00", "2026-01-04T23:45:00Z", "2026-01-04T13:30:00-05:00"]
    },
    "task": {
      "type": "string",
      "description": "UDS Required: Type of work performed on the resource sheet",
      "enum": ["REVIEW", "CONSOLIDATE", "DOCUMENT", "UPDATE", "CREATE"],
      "examples": ["REVIEW", "CONSOLIDATE"]
    },
    "subject": {
      "type": "string",
      "description": "RSMS Required: Primary component, service, or topic being documented",
      "minLength": 1,
      "maxLength": 200,
      "examples": ["AuthService", "UserController", "DatabaseMigration", "API-Gateway"]
    },
    "parent_project": {
      "type": "string",
      "description": "RSMS Required: Parent project or codebase this resource belongs to",
      "minLength": 1,
      "maxLength": 100,
      "examples": ["coderef-workflow", "papertrail", "backend-api", "coderef-testing"]
    },
    "category": {
      "type": "string",
      "description": "RSMS Required: Classification of the resource type",
      "enum": ["service", "controller", "model", "utility", "integration", "component", "middleware", "validator", "schema", "config", "other"],
      "examples": ["service", "controller", "utility"]
    },
    "version": {
      "type": "string",
      "description": "RSMS Recommended: Semantic version of the resource sheet",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "examples": ["1.0.0", "2.1.3"]
    },
    "related_files": {
      "type": "array",
      "description": "RSMS Optional: Source code files related to this resource (enables code navigation)",
      "items": {
        "type": "string",
        "minLength": 1,
        "maxLength": 500,
        "pattern": "^[a-zA-Z0-9/_.-]+\\.[a-zA-Z0-9]+$"
      },
      "uniqueItems": true,
      "examples": [["src/auth/auth.service.ts", "src/auth/token.service.ts", "tests/auth.test.ts"]]
    },
    "related_docs": {
      "type": "array",
      "description": "RSMS Optional: Related documentation files (builds documentation graph)",
      "items": {
        "type": "string",
        "minLength": 1,
        "maxLength": 300,
        "pattern": "^[a-zA-Z0-9/_.-]+\\.md$"
      },
      "uniqueItems": true,
      "examples": [["UserController-RESOURCE-SHEET.md", "API-Authentication-Guide.md", "Security-Standards.md"]]
    },
    "component": {
      "type": "string",
      "description": "Legacy: Use 'subject' instead. Kept for backward compatibility.",
      "minLength": 1,
      "maxLength": 200,
      "deprecated": true,
      "examples": ["AuthService"]
    },
    "workorder": {
      "type": "string",
      "description": "Optional: Associated workorder ID for tracking implementation",
      "pattern": "^WO-[A-Z0-9-]+-\\d{3}$",
      "examples": ["WO-AUTH-SYSTEM-001", "WO-API-REFACTOR-002"]
    },
    "tags": {
      "type": "array",
      "description": "Optional: Tags for categorization and search",
      "items": {
        "type": "string",
        "minLength": 1,
        "maxLength": 50
      },
      "uniqueItems": true,
      "examples": [["authentication", "security", "api"]]
    },
    "status": {
      "type": "string",
      "description": "Optional: Documentation status lifecycle",
      "enum": ["DRAFT", "REVIEW", "APPROVED", "ARCHIVED"],
      "examples": ["DRAFT", "APPROVED"]
    },
    "_comment_workorder_fields": "TEMPORARY SOLUTION: Fields below added as optional to unblock Phase 2 validation. FUTURE: Split into rsms-workorder-v2.0.json extended schema variant (see WO-RSMS-EXTENSION-001)",
    "workorder_id": {
      "type": "string",
      "description": "Optional: Workorder ID tracking this feature implementation (TEMPORARY: Will move to extended schema)",
      "pattern": "^WO-[A-Z0-9-]+-\\d{3}$",
      "examples": ["WO-EXPLORER-SIDEBAR-UX-001"]
    },
    "feature_id": {
      "type": "string",
      "description": "Optional: Feature identifier for multi-agent coordination (TEMPORARY: Will move to extended schema)",
      "examples": ["explorer-sidebar-ux-improvements"]
    },
    "phase": {
      "type": "string",
      "description": "Optional: Development phase for phased workorders (TEMPORARY: Will move to extended schema)",
      "enum": ["phase_1", "phase_2", "phase_3"],
      "examples": ["phase_2"]
    },
    "complexity": {
      "type": "string",
      "description": "Optional: Code complexity rating (TEMPORARY: Will move to extended schema)",
      "enum": ["trivial", "low", "medium", "high", "very_high"],
      "examples": ["medium"]
    },
    "dependencies": {
      "type": "array",
      "description": "Optional: Package/library dependencies, not source file paths (TEMPORARY: Will move to extended schema)",
      "items": { "type": "string" },
      "examples": [["React", "lucide-react", "tailwindcss"]]
    },
    "related_sheets": {
      "type": "array",
      "description": "Optional: Related resource sheet documentation files (TEMPORARY: Will move to extended schema)",
      "items": {
        "type": "string",
        "pattern": "^.*-RESOURCE-SHEET\\.md$"
      },
      "examples": [["FileTree-RESOURCE-SHEET.md", "CodeRef-Explorer-Widget-RESOURCE-SHEET.md"]]
    },
    "created": {
      "type": "string",
      "description": "Optional: Creation date in YYYY-MM-DD format (TEMPORARY: Will move to extended schema)",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "examples": ["2026-01-17"]
    },
    "updated": {
      "type": "string",
      "description": "Optional: Last update date in YYYY-MM-DD format (TEMPORARY: Will move to extended schema)",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "examples": ["2026-01-17"]
    },
    "loc": {
      "type": "integer",
      "description": "Optional: Lines of code in the component (TEMPORARY: Will move to extended schema)",
      "minimum": 0,
      "examples": [118, 320, 1500]
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "agent": "coderef-assistant",
      "date": "2026-01-04",
      "timestamp": "2026-01-04T18:45:00-05:00",
      "task": "CONSOLIDATE",
      "subject": "AuthService",
      "parent_project": "backend-api",
      "category": "service",
      "version": "1.0.0",
      "related_files": [
        "src/auth/auth.service.ts",
        "src/auth/token.service.ts",
        "src/auth/session.service.ts"
      ],
      "related_docs": [
        "UserController-RESOURCE-SHEET.md",
        "API-Authentication-Guide.md"
      ],
      "workorder": "WO-AUTH-SYSTEM-001",
      "tags": ["authentication", "security", "jwt"],
      "status": "APPROVED"
    },
    {
      "agent": "Taylor",
      "date": "2026-01-03",
      "task": "REVIEW",
      "subject": "DatabaseMigration",
      "parent_project": "backend-api",
      "category": "utility",
      "version": "1.0.0"
    },
    {
      "agent": "Ava",
      "date": "2026-01-04",
      "task": "CREATE",
      "subject": "API-Gateway",
      "parent_project": "coderef-workflow",
      "category": "integration",
      "version": "1.0.0",
      "related_files": ["src/gateway/gateway.py"],
      "related_docs": ["MCP-Server-Standards.md"]
    }
  ]
}
