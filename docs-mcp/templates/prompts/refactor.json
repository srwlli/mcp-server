{
  "task": "refactor",
  "instruction": "Identify refactoring opportunities and improvement patterns",
  "context": {
    "input": "{USER_CODE}",
    "focus_areas": ["readability", "DRY", "patterns", "simplification"]
  },
  "output_schema": {
    "findings": [
      {
        "category": "DUPLICATION|COMPLEXITY|NAMING|STRUCTURE|PATTERN",
        "description": "Refactoring opportunity",
        "location": "file:line or function",
        "severity": "critical|high|medium|low"
      }
    ],
    "recommendations": [
      {
        "id": "REC-001",
        "description": "Refactoring suggestion",
        "priority": "high|medium|low",
        "effort": "small|medium|large"
      }
    ],
    "risks": [
      {
        "description": "Refactoring risk",
        "severity": "high|medium|low",
        "likelihood": "high|medium|low"
      }
    ],
    "metrics": {
      "confidence": "0-100",
      "coverage": "comprehensive|partial|surface",
      "top_priorities": ["ranked refactoring targets"],
      "summary_stats": {
        "critical_count": 0,
        "high_count": 0,
        "medium_count": 0,
        "low_count": 0
      }
    },
    "ranked_actions": [
      {
        "rank": 1,
        "action": "Refactoring to perform",
        "reason": "Why this improves the code",
        "impact": "high|medium|low"
      }
    ]
  },
  "success_criteria": [
    "Code duplication identified",
    "Complexity hotspots flagged",
    "Design pattern opportunities suggested",
    "Safe refactoring sequence provided"
  ]
}
