{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://papertrail/schemas/documentation/skill-frontmatter-schema.json",
  "title": "Skill YAML Front Matter Schema",
  "description": "Validates YAML front matter for skill.md files in Claude Code. Based on SKILL-TEMPLATE v1.0.0. Extends base-frontmatter-schema.json with skill-specific metadata (name, description, allowed-tools, model, context, tags).",
  "version": "1.0.0",
  "allOf": [
    {
      "$ref": "./base-frontmatter-schema.json"
    },
    {
      "type": "object",
      "required": ["name", "description"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Skill identifier (kebab-case, used in /skill-name invocation)",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$",
          "minLength": 3,
          "maxLength": 50,
          "examples": [
            "deploy-production",
            "scan-codebase",
            "generate-api-docs",
            "coderef-scanner"
          ]
        },
        "description": {
          "type": "string",
          "description": "One-sentence description of what this skill does (action-oriented)",
          "minLength": 10,
          "maxLength": 200,
          "examples": [
            "Deploy application to AWS production environment with health checks",
            "Analyze codebase using coderef-core integration for functions, classes, components, dependencies",
            "Generate foundation docs (README, ARCHITECTURE, API) from codebase"
          ]
        },
        "allowed-tools": {
          "type": "array",
          "description": "Optional: List of tools this skill can use (restricts permissions)",
          "items": {
            "type": "string",
            "enum": [
              "Bash",
              "Read",
              "Write",
              "Edit",
              "Glob",
              "Grep",
              "Task",
              "WebFetch",
              "WebSearch",
              "AskUserQuestion",
              "TodoWrite",
              "Skill",
              "SlashCommand",
              "NotebookEdit",
              "BashOutput",
              "KillShell"
            ]
          },
          "minItems": 1,
          "uniqueItems": true,
          "examples": [
            ["Bash", "Read"],
            ["Read", "mcp__coderef-context__coderef_scan", "mcp__coderef-context__coderef_query"]
          ]
        },
        "model": {
          "type": "string",
          "description": "Optional: Preferred model for this skill",
          "enum": ["haiku", "sonnet", "opus"],
          "examples": [
            "sonnet",
            "haiku",
            "opus"
          ]
        },
        "context": {
          "type": "string",
          "description": "Optional: When should Claude invoke this skill? What triggers it?",
          "minLength": 10,
          "maxLength": 500,
          "examples": [
            "Use when user says 'deploy to staging' or 'test deployment'. Requires STAGING_URL environment variable.",
            "Use when user asks to analyze codebase structure, find dependencies, or understand code complexity. NOT for file search (use Glob/Grep).",
            "Use when the user explicitly requests a production deployment. It requires AWS credentials to be configured in the environment."
          ]
        },
        "tags": {
          "type": "array",
          "description": "Optional: Categorization tags for organizing skills",
          "items": {
            "type": "string",
            "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$",
            "minLength": 2,
            "maxLength": 30
          },
          "minItems": 1,
          "maxItems": 10,
          "uniqueItems": true,
          "examples": [
            ["deployment", "aws", "production"],
            ["analysis", "codebase", "dependencies"],
            ["documentation", "generation", "automation"]
          ]
        },
        "workorder_id": {
          "type": "string",
          "description": "Optional: Workorder ID if this skill was created as part of a feature workorder",
          "pattern": "^WO-[A-Z0-9-]+-\\d{3}$",
          "examples": [
            "WO-DEPLOYMENT-AUTOMATION-001",
            "WO-CODEBASE-ANALYSIS-001"
          ]
        },
        "version": {
          "type": "string",
          "description": "Optional: Skill version (semantic versioning)",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "examples": [
            "1.0.0",
            "2.1.3",
            "0.9.0"
          ]
        },
        "line_count": {
          "type": "integer",
          "description": "Optional: Total line count for compliance tracking (target: 300-500)",
          "minimum": 100,
          "maximum": 800,
          "examples": [
            320,
            180,
            450
          ]
        },
        "compliance_score": {
          "type": "integer",
          "description": "Optional: Validation score from papertrail validator (0-100)",
          "minimum": 0,
          "maximum": 100,
          "examples": [
            95,
            88,
            75
          ]
        },
        "line_budget_status": {
          "type": "string",
          "description": "Optional: Line budget compliance status",
          "enum": [
            "‚úÖ Within target (300-500)",
            "‚ö†Ô∏è Below target (<300)",
            "‚ö†Ô∏è Slightly over (500-600)",
            "‚ùå Over budget (600-800)",
            "üö® Critical bloat (>800)"
          ],
          "examples": [
            "‚úÖ Within target (300-500)",
            "‚ö†Ô∏è Slightly over (500-600)"
          ]
        }
      }
    }
  ],
  "examples": [
    {
      "agent": "DevOps Team",
      "date": "2026-01-15",
      "task": "CREATE",
      "name": "deploy-production",
      "description": "Deploy application to AWS production environment with health checks",
      "allowed-tools": ["Bash", "Read", "WebFetch"],
      "model": "sonnet",
      "context": "Use when the user explicitly requests a production deployment. It requires AWS credentials to be configured in the environment.",
      "tags": ["deployment", "aws", "production"],
      "version": "1.0.0",
      "line_count": 220,
      "compliance_score": 95,
      "line_budget_status": "‚úÖ Within target (300-500)"
    },
    {
      "agent": "Claude Sonnet 4.5",
      "date": "2026-01-10",
      "timestamp": "2026-01-10T12:00:00Z",
      "task": "DOCUMENT",
      "name": "coderef-scanner",
      "description": "Analyze codebase using coderef-core integration for functions, classes, components, dependencies",
      "model": "sonnet",
      "context": "Use when user asks to analyze codebase structure, find dependencies, or understand code complexity. NOT for file search (use Glob/Grep).",
      "tags": ["analysis", "codebase", "dependencies"],
      "workorder_id": "WO-CODEBASE-ANALYSIS-001",
      "version": "1.2.0",
      "line_count": 220,
      "compliance_score": 92
    },
    {
      "agent": "Taylor",
      "date": "2026-01-05",
      "task": "CREATE",
      "name": "generate-docs",
      "description": "Generate foundation docs (README, ARCHITECTURE, API) from codebase",
      "model": "haiku",
      "tags": ["documentation", "generation", "automation"],
      "line_count": 180,
      "line_budget_status": "‚ö†Ô∏è Below target (<300)"
    }
  ]
}
